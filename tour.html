<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tour</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- CSS riÃªng -->
  <link rel="stylesheet" href="tour.css">
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
    <div class="container">
      <!-- Logo -->
      <a class="navbar-logo-fixed" href="#">
        <img src="images/logo.png" alt="Logo" class="logo-fixed" />
      </a>

      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Menu -->
      <div class="collapse navbar-collapse justify-content-center" id="navbarMenu">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="TrangChu.html">TRANG CHá»¦</a></li>
          <li class="nav-item">
            <a class="nav-link" href="diaDanh.html">Äá»ŠA DANH Ná»”I Báº¬T</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="Food.html">áº¨M THá»°C</a></li>
          <li class="nav-item">
            <a class="nav-link" href="nghiDuong.html">NGHá»ˆ DÆ¯á» NG</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="tour.html">TOUR</a>
          </li>
        </ul>

        <div class="login-section" id="login-section">
          <a href="dangNhap.html" class="login-text">
            <i class="bi bi-person-circle me-2 fs-5"></i>ÄÄ‚NG NHáº¬P
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Banner -->
  <section class="banner">
    <div class="banner-content">
      <h1>DA NANG</h1>

      <!-- Bá»™ sÆ°u táº­p áº£nh -->
      <div class="gallery">
      </div>
      <!-- NÃºt khÃ¡m phÃ¡ ngay -->
      <a href="#tour" class="explore-btn">KhÃ¡m phÃ¡ ngay</a>
    </div>
  </section>
  <div class="container py-5">
    <p class="danang-desc">
      ÄÃ  Náºµng â€“ thÃ nh phá»‘ cá»§a nhá»¯ng cÃ¢y cáº§u, biá»ƒn xanh, nÃºi non hÃ¹ng vÄ© vÃ  con ngÆ°á»i thÃ¢n thiá»‡n.<br>
      Äáº¿n Ä‘Ã¢y, báº¡n sáº½ vá»«a Ä‘Æ°á»£c táº­n hÆ°á»Ÿng khÃ´ng khÃ­ biá»ƒn trong lÃ nh, vá»«a khÃ¡m phÃ¡ vÄƒn hÃ³a â€“ áº©m thá»±c Ä‘áº·c trÆ°ng miá»n
      Trung.<br>
      Tá»« nghá»‰ dÆ°á»¡ng sang trá»ng Ä‘áº¿n nhá»¯ng tráº£i nghiá»‡m Ä‘á»‹a phÆ°Æ¡ng Ä‘áº­m cháº¥t Viá»‡t, ÄÃ  Náºµng luÃ´n cÃ³ thá»© khiáº¿n báº¡n say mÃª.
    </p>

    <h2 id="tour" class="text-center mb-4 fw-bold">ğŸŒ´ TOUR DU Lá»ŠCH ÄÃ€ Náº´NG</h2>


    <!-- Äiá»u hÆ°á»›ng tour -->
    <ul class="nav nav-pills justify-content-center mb-4" id="tourTabs" role="tablist">
    </ul>

    <!-- Chi tiáº¿t tour-->
    <div class="tab-content" id="tourContent">


    </div>
    <!-- Tour ná»•i báº­t -->
    <div id="tourCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <h2 class="text-center mb-4 fw-bold">âœ¨ Tour ná»•i báº­t khÃ¡c</h2>

        <!-- Tour 1 -->
        <div class="carousel-item active">
          <div class="card">
            <img src="images/thanh-pho-hoi-an.webp" class="card-img-top" alt="ThÃ nh phá»‘ Há»™i An">
            <div class="card-body text-center">
              <h5 class="card-title">Tour Há»™i An 1 NgÃ y</h5>
              <p class="card-text">Tham quan phá»‘ cá»•, chÃ¹a Cáº§u, tráº£i nghiá»‡m tháº£ Ä‘Ã¨n hoa Ä‘Äƒng.</p>
              <button class="fav-btn">
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
                <i class="fas fa-heart"></i> ThÃªm má»¥c yÃªu thÃ­ch
              </button>
              <a href="#" class="btn btn-book mt-2" data-bs-toggle="modal" data-bs-target="#bookingModal"
                data-tour="Tour Há»™i An 1 ngÃ y">Äáº·t ngay</a>
            </div>
          </div>
        </div>

        <!-- Tour 2 -->
        <div class="carousel-item">
          <div class="card">
            <img src="images/deoBachMa.jpg" class="card-img-top" alt="ÄÃ¨o Báº¡ch MÃ£">
            <div class="card-body text-center">
              <h5 class="card-title">Máº¡o hiá»ƒm thiÃªn nhiÃªn</h5>
              <p class="card-text">Trekking, láº·n biá»ƒn, cáº¯m tráº¡i â€“ khÃ¡m phÃ¡ rá»«ng nÃºi vÃ  biá»ƒn Ä‘áº£o ÄÃ  Náºµng.</p>
              <button class="fav-btn">
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
                <i class="fas fa-heart"></i> ThÃªm má»¥c yÃªu thÃ­ch
              </button>
              <a href="#" class="btn btn-book mt-2" data-bs-toggle="modal" data-bs-target="#bookingModal"
                data-tour="Tour trekking khÃ¡m phÃ¡ thiÃªn nhiÃªn">Äáº·t ngay</a>
            </div>
          </div>
        </div>

        <!-- Tour 3 -->
        <div class="carousel-item">
          <div class="card">
            <img src="images/giadinh.jpg" class="card-img-top" alt="Gia Ä‘Ã¬nh vui chÆ¡i">
            <div class="card-body text-center">
              <h5 class="card-title">HÃ nh trÃ¬nh Gia Ä‘Ã¬nh vui váº»</h5>
              <p class="card-text">Nghá»‰ dÆ°á»¡ng, vui chÆ¡i vÃ  gáº¯n káº¿t gia Ä‘Ã¬nh trong khÃ´ng khÃ­ biá»ƒn trong lÃ nh.</p>
              <button class="fav-btn">
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
                <i class="fas fa-heart"></i> ThÃªm má»¥c yÃªu thÃ­ch
              </button>
              <a href="#" class="btn btn-book mt-2" data-bs-toggle="modal" data-bs-target="#bookingModal"
                data-tour="Tour trekking khÃ¡m phÃ¡ thiÃªn nhiÃªn">Äáº·t ngay</a>
            </div>
          </div>
        </div>
      </div>

      <!-- NÃºt Ä‘iá»u hÆ°á»›ng -->
      <button class="carousel-control-prev" type="button" data-bs-target="#tourCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">TrÆ°á»›c</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#tourCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Sau</span>
      </button>
    </div>

    <!-- Modal form Ä‘áº·t tour -->
    <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-4">
          <h5 class="modal-title mb-3 text-center " id="bookingModalLabel">Äáº·t Tour Ngay</h5>
          <form>
            <div class="mb-3">
              <label class="form-label">Há» vÃ  tÃªn</label>
              <input type="text" class="form-control" placeholder="Nháº­p há» tÃªn cá»§a báº¡n" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Sá»‘ Ä‘iá»‡n thoáº¡i</label>
              <input type="tel" class="form-control" placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" placeholder="Nháº­p email (náº¿u cÃ³)">
            </div>
            <div class="mb-3">
              <label class="form-label">Chá»n tour</label>
              <input type="text" id="selectedTour" class="form-control" readonly>
            </div>
            <button type="submit" class="btn btn-book w-100 mt-2">XÃ¡c nháº­n Ä‘áº·t tour</button>
          </form>
        </div>
      </div>
    </div>
    <!-- VÃ¬ sao nÃªn chá»n -->
    <section class="why-choose py-5">
      <div class="container text-center">
        <h3 class="fw-bold mb-4">ğŸŒŸ VÃ¬ sao nÃªn chá»n chÃºng tÃ´i?</h3>
        <div class="row g-4">
          <div class="col-md-4">
            <i class="bi bi-star-fill fs-1 text-warning"></i>
            <h5 class="fw-bold mt-2">Uy tÃ­n hÃ ng Ä‘áº§u</h5>
            <p>Äá»‘i tÃ¡c cá»§a cÃ¡c khu du lá»‹ch vÃ  khÃ¡ch sáº¡n lá»›n táº¡i ÄÃ  Náºµng.</p>
          </div>
          <div class="col-md-4">
            <i class="bi bi-wallet2 fs-1 text-success"></i>
            <h5 class="fw-bold mt-2">GiÃ¡ tá»‘t â€“ Trá»n gÃ³i</h5>
            <p>KhÃ´ng phá»¥ phÃ­ áº©n, bao gá»“m xe Ä‘Æ°a Ä‘Ã³n vÃ  hÆ°á»›ng dáº«n viÃªn.</p>
          </div>
          <div class="col-md-4">
            <i class="bi bi-heart-fill fs-1 text-danger"></i>
            <h5 class="fw-bold mt-2">ChÄƒm sÃ³c táº­n tÃ¢m</h5>
            <p>Há»— trá»£ 24/7 trÆ°á»›c, trong vÃ  sau khi Ä‘i tour.</p>
          </div>
        </div>
      </div>
    </section>
    <!-- Báº£n Ä‘á»“ -->
    <!-- <section class="map-section py-5 bg-light">
  <div class="container">
    <h3 class="text-center fw-bold mb-4">ğŸ—ºï¸ Vá»‹ trÃ­ cÃ¡c tour táº¡i ÄÃ  Náºµng</h3>
    <div class="ratio ratio-16x9">
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.477201871145!2d108.22152331533427!3d16.066370743599768!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x314219bf6c456bd9%3A0xf2cf8d5d9f58e74c!2zQ-G7rWEgUuG7k25nLCBEw6AgTuG6tW5nLCBWaWV0bmFt!5e0!3m2!1sen!2s!4v1615400324312!5m2!1sen!2s"
        width="700" height="250" style="border:0;" allowfullscreen="" loading="lazy">
      </iframe>
    </div>
  </div>
</section> -->

    <!-- ğŸŒŠ Footer -->
    <footer class="footer text-light">
      <div class="container py-5">
        <div class="row gy-4">

          <!-- Logo & MÃ´ táº£ -->
          <div class="col-md-4">
            <h3 class="footer-logo">ÄÃ  Náºµng Travel</h3>
            <p>KhÃ¡m phÃ¡ váº» Ä‘áº¹p ÄÃ  Náºµng â€“ thÃ nh phá»‘ Ä‘Ã¡ng sá»‘ng nháº¥t Viá»‡t Nam.
              ChÃºng tÃ´i mang Ä‘áº¿n nhá»¯ng tráº£i nghiá»‡m du lá»‹ch Ä‘á»™c Ä‘Ã¡o vÃ  tiá»‡n lá»£i.</p>
          </div>

          <!-- LiÃªn káº¿t nhanh -->
          <div class="col-md-4">
            <h5>LiÃªn káº¿t nhanh</h5>
            <ul class="footer-links">
              <li><a href="#about">Giá»›i thiá»‡u</a></li>
              <li><a href="diaDanh.html">Äá»‹a Danh</a></li>
              <li><a href="nghiDuong.html">Nghá»‰ DÆ°á»¡ng</a></li>
              <li><a href="Food.html">áº¨m thá»±c</a></li>
              <li><a href="tour.html">Tour</a></li>
              <li><a href="lienhe.html">LiÃªn há»‡</a></li>
            </ul>
          </div>

          <!-- LiÃªn há»‡ & Máº¡ng xÃ£ há»™i -->
          <div class="col-md-4">
            <h5>LiÃªn há»‡</h5>
            <p><i class="fas fa-map-marker-alt"></i> 123 ÄÆ°á»ng Báº¡ch Äáº±ng, ÄÃ  Náºµng</p>
            <p><i class="fas fa-phone"></i> 0901 234 567</p>
            <p><i class="fas fa-envelope"></i> info@danangtravel.vn</p>

            <div class="social-icons mt-3">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-tiktok"></i></a>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom text-center py-3">
        <p>Â© 2025 ÄÃ  Náºµng Travel. Thiáº¿t káº¿ bá»Ÿi <strong>CTV Team</strong>.</p>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JS Ä‘á»ƒ hiá»ƒn thá»‹ tÃªn tour -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Láº¯ng nghe trÃªn container cha
        const galleryContainer = document.querySelector(".gallery");

        if (galleryContainer) {
          galleryContainer.addEventListener("click", function (event) {
            
            // Chá»‰ xá»­ lÃ½ khi click trÃºng tháº» IMG
            if (event.target.tagName === 'IMG') { 
              const img = event.target;
              const tourId = img.getAttribute("data-tour");
              const target = document.querySelector(tourId);

              if (target) {
                // Cuá»™n Ä‘áº¿n pháº§n ná»™i dung tour
                target.scrollIntoView({ behavior: "smooth", block: "start" });

                // KÃ­ch hoáº¡t tab tÆ°Æ¡ng á»©ng
                const tabTrigger = document.querySelector(`[data-bs-target="${tourId}"]`);
                if (tabTrigger) {
                  const tab = new bootstrap.Tab(tabTrigger);
                  tab.show();
                }
              }
            }
          });
        }
      });
    </script>
    
    <script>
      const bookingModal = document.getElementById('bookingModal');
      bookingModal.addEventListener('show.bs.modal', function (event) {
        const button = event.relatedTarget;
        const tourName = button.getAttribute('data-tour');
        const inputTour = bookingModal.querySelector('#selectedTour');
        inputTour.value = tourName;
      });
    </script>
    
    <script>

      let tourList = [];

      // Script táº£i tour (Giá»¯ nguyÃªn)
      document.addEventListener('DOMContentLoaded', async () => {
        try {
          const res = await fetch('tour.php');        
          const data = await res.json();

          if (data.status === 'success' && Array.isArray(data.tourList)) {
            tourList = data.tourList;
          } else {
            tourList = [];
          }

          if (typeof renderTours === 'function') {
            renderTours(tourList); // Giá»¯ láº¡i náº¿u báº¡n cÃ³ hÃ m nÃ y á»Ÿ Ä‘Ã¢u Ä‘Ã³
          }

          document.dispatchEvent(new CustomEvent('tours:loaded', { detail: { tourList } }));

        } catch (err) {
          console.error('Lá»—i táº£i tour:', err);
          tourList = [];
        }
      });


      // [THAY Äá»”I] Script láº¯ng nghe 'tours:loaded' (váº½ gallery + tabs + content)
      document.addEventListener('tours:loaded', function (e) {
        const list = e.detail?.tourList || [];
        const tourContent = document.getElementById('tourContent');
        const tourTabs = document.getElementById('tourTabs');
        
        // Láº¥y gallery container
        const galleryContainer = document.querySelector(".gallery");

        // XÃ³a ná»™i dung tÄ©nh/cÅ©
        tourContent.innerHTML = '';
        tourTabs.innerHTML = '';
        galleryContainer.innerHTML = ''; 

        if (!list.length) {
          tourContent.innerHTML = '<div class="alert alert-warning">ChÆ°a cÃ³ tour nÃ o.</div>';
          return;
        }

        list.forEach((tour, index) => {
          const tabId = `tour${index + 1}`; // ID nÃ y sáº½ lÃ  tour1, tour2...

          // 1. Táº O áº¢NH CHO GALLERY
          // DÃ¹ng tour.anhSub (tá»« ImageTourSub)
          const img = document.createElement('img');
          img.src = tour.anhSub || 'images/placeholder.jpg'; // DÃ¹ng áº£nh Sub
          img.alt = tour.ten || 'áº¢nh tour';
          img.setAttribute('data-tour', `#${tabId}`); // Trá» Ä‘áº¿n Ä‘Ãºng tab
          galleryContainer.appendChild(img);


          // 2. Táº O NÃšT TAB
          const li = document.createElement('li');
          li.className = 'nav-item';
          li.innerHTML = `
      <button class="nav-link ${index === 0 ? 'active' : ''}"
              data-bs-toggle="pill"
              data-bs-target="#${tabId}"
              type="button">Tour ${index + 1}</button>`;
          tourTabs.appendChild(li);

          // 3. Táº O Ná»˜I DUNG TAB (dÃ¹ng tour.anh tá»« ImageTourMain)
          const tabPane = document.createElement('div');
          tabPane.className = `tab-pane fade ${index === 0 ? 'show active' : ''}`;
          tabPane.id = tabId;
          tabPane.setAttribute('role', 'tabpanel');

          const lichTrinh = Array.isArray(tour.lichTrinh) ? tour.lichTrinh : [];
          const lichTrinhHtml = lichTrinh.map(item => `<li>${item}</li>`).join('');

          tabPane.innerHTML = `
      <div class="row g-4 align-items-center">
        <div class="col-md-6">
          <img src="${tour.anh || 'images/placeholder.jpg'}" alt="${tour.ten || ''}" class="tour-img">
        </div>
        <div class="col-md-6">
          <h4 class="fw-bold">TOUR ${index + 1}: ${tour.ten || ''}</h4>
          <p>â° <b>${tour.thoiGian || ''}</b><br>
          ğŸ’° ${tour.gia || ''}<br>
          ğŸ‘¥ ${tour.doiTuong || ''}<br>
          ğŸ¨ ${tour.khachSan || ''}</p>
          <h6 class="fw-bold">ğŸ—“ Lá»‹ch trÃ¬nh chi tiáº¿t:</h6>
          <ul>${lichTrinhHtml}</ul>
          <button class="fav-btn" onclick="handleYeuThich(${tour.id})">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
            <i class="fas fa-heart"></i> ThÃªm má»¥c yÃªu thÃ­ch
          </button>
          <a href="#" class="btn btn-book mt-2" data-bs-toggle="modal"
             data-bs-target="#bookingModal" data-tour="${tour.ten || ''}">
            Äáº·t ngay
          </a>
        </div>
      </div>`;
          tourContent.appendChild(tabPane);
        });
      });

      // Script xá»­ lÃ½ yÃªu thÃ­ch (Giá»¯ nguyÃªn)
      isLoggedIn = false;
      async function handleYeuThich(id) {
        if (!isLoggedIn) {
          const goLogin = confirm("Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ thÃªm tour vÃ o yÃªu thÃ­ch!");
          if (goLogin) window.location.href = "dangNhap.html";
          return;

        }
        try {
          const res = await fetch("YT.php", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              action: "add",
              loai: "TOUR",
              id: id,
            }),
          });
          const data = await res.json();
          if (data.needLogin) {
            alert("PhiÃªn Ä‘Äƒng nháº­p Ä‘Ã£ háº¿t háº¡n. Vui lÃ²ng Ä‘Äƒng nháº­p!");
            window.location.href = "dangNhap.html";
            return;
          }
          if (data.success) {
            alert(data.message || "ÄÃ£ thÃªm vÃ o má»¥c yÃªu thÃ­ch!");
          } else {
            alert(data.message || "Má»¥c nÃ y Ä‘Ã£ cÃ³ trong má»¥c yÃªu thÃ­ch!");
          }
        }
        catch (err) {
          console.error(err);
          alert("ÄÃ£ cÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i sau!");
        }
      }

      // Script kiá»ƒm tra Ä‘Äƒng nháº­p (Giá»¯ nguyÃªn)
      document.addEventListener("DOMContentLoaded", () => {
        const loginSection = document.getElementById('login-section');
        const navbarMenu = document.getElementById('navbarMenu');

        fetch('getUser.php')
          .then(res => res.json())
          .then(data => {
            if (data.loggedIn) {
              isLoggedIn = true;
              // Thay ná»™i dung login-section
              loginSection.innerHTML = `
          <a class="login-text" href ="suaHS.html"><i class="bi bi-person-circle me-2 fs-5" ></i>${data.TenTaiKhoan}</a>
          <a href="dangXuat.php" class="login-text ms-3">
            <i class="bi bi-box-arrow-in-right me-2 fs-5"></i>ÄÄ‚NG XUáº¤T
          </a>
        `;

              // Thay menu náº¿u muá»‘n thÃªm má»¥c YÃªu thÃ­ch
              navbarMenu.querySelector('ul.navbar-nav').innerHTML = `
          <li class="nav-item"><a class="nav-link" href="TrangChu.html">TRANG CHá»¦</a></li>
          <li class="nav-item"><a class="nav-link" href="diaDanh.html">Äá»ŠA DANH Ná»”I Báº¬T</a></li>
          <li class="nav-item"><a class="nav-link" href="Food.html">áº¨M THá»°C</a></li>
          <li class="nav-item"><a class="nav-link" href="nghiDuong.html">NGHá»ˆ DÆ¯á» NG</a></li>
          <li class="nav-item"><a class="nav-link" href="tour.html">TOUR</a></li>
          <li class="nav-item"><a class="nav-link" href="YT.html">Má»¤C YÃŠU THÃCH</a></li>
          <li class="nav-item"><a class="nav-link" href="Lichsu.html">Lá»ŠCH Sá»¬ Äáº¶T TOUR</a></li>
        `;
            }
          });
      });
    </script>


</body>

</html>